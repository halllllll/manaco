# 教員ビュー (Teacher View) 仕様書

## 概要
この教員ビューは、小学校の先生が生徒の学習活動を客観的に把握するためのダッシュボードです。
生徒の学習記録データを閲覧し、クラス全体の進捗状況や個々の生徒の学習パターンを確認できます。

## 基本設計方針

- **客観的データ表示**: 評価につながる示唆や判断材料は含めず、純粋なデータ表示に徹する
- **シンプルなUI**: daisyUIとTailwind CSSを使用したクリーンで機能的なインターフェース
- **効率的なデータ閲覧**: @tanstack/react-tableと@tanstack/react-virtualを活用した高パフォーマンスな表示
- **既存コンポーネントの再利用**: 生徒ビューで使用されている一部コンポーネントの共通化

## 画面構成

### 1. ヘッダー
- アプリ名
- 現在のクラス/グループ選択ドロップダウン
- 教員名表示
- テーマ切り替え（ライト/ダーク）

### 2. メインダッシュボード
#### 2.1 概要パネル
- 登録生徒総数
- 今日の学習記録投稿数
- 今週の学習記録投稿数

#### 2.2 クラス活動状況
- 直近10日間の活動データをヒートマップ形式で表示
  - 行: 生徒名
  - 列: 日付
  - セル: 活動の有無（記録があるかどうか）
- フィルタリングとソート機能
  - クラス/グループでフィルタリング
  - 名前順/活動数順でソート

#### 2.3 生徒一覧
- 検索・フィルター機能付きテーブル
- ページネーション（@tanstack/react-tableを使用）
- 表示項目:
  - 生徒ID
  - 生徒名
  - クラス/グループ（設定されている場合）
  - 総学習記録数
  - 直近の学習記録日
  - 詳細ボタン

### 3. 生徒詳細画面
- 生徒の基本情報
- 学習活動の統計データ（共通コンポーネントとして切り出した生徒ビューのコンポーネントを使用）
- 学習記録の履歴（共通コンポーネントとして切り出した`learningLogs`コンポーネントを使用）

## コンポーネント設計

### 1. 共通コンポーネント（student/teacherで共有）
- `ActivityTable`: 学習活動テーブル（src/client/student/components/learningLogsから切り出し）
- `ActivityDetailModal`: 活動詳細モーダル（同上）

### 2. 教員専用コンポーネント
- `TeacherHeader`: 教員ビューのヘッダー
- `TeacherDashboard`: メインダッシュボード
- `StudentSummaryTable`: 生徒一覧テーブル（@tanstack/react-tableを使用）
- `ActivityHeatmap`: 直近の活動状況ヒートマップ
- `StudentDetailView`: 生徒詳細表示

### 3. データ表示コンポーネント
- `StatCard`: 統計データ表示カード
- `DataTable`: 汎用テーブルコンポーネント（@tanstack/react-tableをラップ）
- `VirtualizedList`: 大量データ表示用リスト（@tanstack/react-virtualを使用）

## 画面フロー
1. 教員がログイン → TeacherDashboardを表示
2. クラス/グループフィルターを選択 → 該当する生徒データをロード
3. 生徒一覧から生徒を選択 → StudentDetailViewを表示
4. 生徒の詳細データを表示（ActivityTableを使用）

## 技術仕様

### データ取得
- 生徒データはGoogle Apps Script経由でSpreadsheetから初回ロード時に一括取得
- ページ読み込み時に全データを取得し、クライアント側でキャッシュ・加工して表示
- データの更新は画面リロード時のみ（ポーリングなし）
- エラー処理とローディング状態の適切な表示
- クライアント側でのフィルタリングと検索機能の実装

### パフォーマンス最適化
- @tanstack/react-virtualを使用した仮想スクロール実装
- 大量データの効率的な表示と操作

### アクセシビリティ
- キーボード操作対応
- スクリーンリーダー対応
- 十分なコントラスト比

## UIデザインガイドライン

### カラーパレット
- Primary: 現在の生徒ビューのprimary colorを継承
- Secondary: より控えめな色調を使用（教員ビューの特性に合わせる）
- アクセント色: データの種類や重要度に応じた色分け

### レイアウト
- レスポンシブデザイン
- デスクトップ優先（教員は主にPCで使用する前提）
- 情報密度を高めつつ、読みやすさを確保

### コンポーネント
- daisyUIの標準コンポーネントを活用
- 表: `table`、`table-compact`
- カード: `card`、`card-body`
- タブ: `tabs`、`tab`
- アラート: `alert`

## 実装時の注意点
- 生徒の評価につながるような視覚的要素（連続提出日数の強調など）は避ける
- データは客観的事実のみを表示する
- フィルタリングやソート機能を充実させ、先生が自分で必要な情報を見つけられるようにする
- パフォーマンスを意識し、大量データを扱う場合は仮想化を適用する
